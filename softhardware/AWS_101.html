
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AWS 101 &#8212; HPS CyberTraining</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AWS S3" href="AWS_S3.html" />
    <link rel="prev" title="Intro" href="index.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">HPS CyberTraining</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Welcome to HPS CyberTraining!
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Workshop Details
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../application.html">
   Application
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://seisscoped.org/HPS/index.html?jump_to=schedule">
   Schedule
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://seisscoped.org/HPS/index.html?jump_to=team">
   Team
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../get-started.html">
   Preparation Necessary for the workshop
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mission.html">
   HPS CyberTraining Mission
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../CoC.html">
   Event Code of Conduct
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Preliminary Resources
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../preliminary/index.html">
   Preliminary Coding Work
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../preliminary/swc.html">
     Software Carpentry Training
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../preliminary/github.html">
     GitHub
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../preliminary/jupyterhub.html">
     JupyterHub
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../preliminary/git.html">
     Git
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../preliminary/python.html">
     Python Installation
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../preliminary_seismo/index.html">
   Preliminary Seismology
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  CyberInfrastructure
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="index.html">
   Intro
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   AWS 101
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="AWS_S3.html">
   AWS S3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="AWS_EC2Batch.html">
   AWS EC2 Batch
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Ambient Noise
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../ambient_noise/noisepy.html">
   NoisePy
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Reference
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../reference/glossary.html">
   Glossaries
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../reference/bibliography.html">
   Bibliography
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../reference/open_science.html">
   Open Science
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../reference/open_source_software.html">
   Open-source Software
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../reference/questions.html">
   How to Get Help
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/softhardware/AWS_101.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/SeisSCOPED/HPS/"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/SeisSCOPED/HPS//issues/new?title=Issue%20on%20page%20%2Fsofthardware/AWS_101.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/SeisSCOPED/HPS/edit/main/book/softhardware/AWS_101.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   AWS 101
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-cloud-computing">
     What is Cloud Computing
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#web-console-access">
     Web Console Access
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#specific-to-workshops">
       <strong>
        Specific to workshops
       </strong>
       :
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#choosing-a-region">
       Choosing a region
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#launching-an-instance">
       Launching an instance
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing-software">
   Installing Software
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#download-upload-to-your-ec2-instance">
     Download / Upload to your EC2 instance
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-jupyter-notebooks">
     Running Jupyter Notebooks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#save-the-virtual-image">
     Save the Virtual Image
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-docker-on-ec2">
     Using Docker on EC2
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#terminating-an-instance">
     Terminating an instance
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>AWS 101</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   AWS 101
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#what-is-cloud-computing">
     What is Cloud Computing
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#web-console-access">
     Web Console Access
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#specific-to-workshops">
       <strong>
        Specific to workshops
       </strong>
       :
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#choosing-a-region">
       Choosing a region
      </a>
     </li>
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#launching-an-instance">
       Launching an instance
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installing-software">
   Installing Software
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#download-upload-to-your-ec2-instance">
     Download / Upload to your EC2 instance
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-jupyter-notebooks">
     Running Jupyter Notebooks
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#save-the-virtual-image">
     Save the Virtual Image
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-docker-on-ec2">
     Using Docker on EC2
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#terminating-an-instance">
     Terminating an instance
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="aws-101">
<h1>AWS 101<a class="headerlink" href="#aws-101" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will walk you thought getting on an AWS cloud instance from the ground up.</p>
<div class="section" id="what-is-cloud-computing">
<h2>What is Cloud Computing<a class="headerlink" href="#what-is-cloud-computing" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://docs.google.com/presentation/d/1E9_nGlHW8Rz2g4UrQMXyRVZ1UoxuSNejGmszf-OVDrI/edit?usp=drive_link">Presentation</a> from Naomi Alterman (UW) and Rob Fatland (UW) and their video tutorial:</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/S6X10HZDyrA?si=xMuZC5-VqMJjU9Rz" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
</div>
<div class="section" id="web-console-access">
<h2>Web Console Access<a class="headerlink" href="#web-console-access" title="Permalink to this headline">¶</a></h2>
<div class="section" id="specific-to-workshops">
<h3><strong>Specific to workshops</strong>:<a class="headerlink" href="#specific-to-workshops" title="Permalink to this headline">¶</a></h3>
<ol class="simple">
<li><p>log in with your designated IAM User to this console: <a class="reference external" href="https://806812320051.signin.aws.amazon.com/console">https://806812320051.signin.aws.amazon.com/console</a></p></li>
<li><p>Choose the username that was decided by you and the workshop admin (IAM user nae account).</p></li>
<li><p>As a first log in, the auto generated password will need to be replaced. Use a sophisticated password to confirm with AWS security standards.</p></li>
</ol>
</div>
<div class="section" id="choosing-a-region">
<h3>Choosing a region<a class="headerlink" href="#choosing-a-region" title="Permalink to this headline">¶</a></h3>
<p>An important aspect of cloud is that the computing and data centers are distributed around the world and labeled as “regions”. For fastest connection to data storage on S3, we strongly recommend to choose the region where the data is. For instance, the AWS open data sets</p>
<p>To choose a region in AWS, follow these steps:</p>
<ol class="simple">
<li><p>Log in to your AWS Management Console.</p></li>
<li><p>In the top-right corner, click on the current region name (e.g., “US East (N. Virginia)”).</p></li>
<li><p>In the dropdown menu that appears, select a region (e.g. “US West (Oregon)”).</p></li>
<li><p>After selecting the region, all AWS services you use will be hosted in that region.</p></li>
</ol>
</div>
<div class="section" id="launching-an-instance">
<h3>Launching an instance<a class="headerlink" href="#launching-an-instance" title="Permalink to this headline">¶</a></h3>
<p>Launch an instance using EC2 (Elastic Computing Cloud). Follow the steps below. Screen shots of the steps are linked <a class="reference external" href="https://docs.google.com/presentation/d/1L49N8OL8vscjOkERC32l7H6K9IS-EeXOf6qerNEYxPs/edit?usp=sharing">here</a></p>
<ol class="simple">
<li><p>In the AWS Management Console, navigate to the EC2 dashboard.</p></li>
<li><p>Click on “Launch Instance” to start the process of creating a new EC2 instance.</p></li>
</ol>
<p><img alt="Launch an Instance" src="../_images/launch_ec2_ss.jpg" /></p>
<ol>
<li><p>Choose a default <strong>instance OS</strong>: <code class="docutils literal notranslate"><span class="pre">Amazon</span> <span class="pre">linux</span></code>. You may also choose an Amazon Machine Image (AMI).</p></li>
<li><p><strong>Name and tags</strong>: Be specific for best job management: <code class="docutils literal notranslate"><span class="pre">FirstName_LastName_jobname</span></code></p></li>
<li><p><strong>Instance type</strong>: t2.micro</p></li>
<li><p><strong>Key pair</strong>: create a new key pair. Download the .pem file, move it to a location that you can have access to and remember where it is. If the file does not save as .pem, replace the extension with .pem. If you use a windows computer, you might need a ppk</p></li>
<li><p><strong>Network Setting</strong>: <code class="docutils literal notranslate"><span class="pre">Allow</span> <span class="pre">SSH</span> <span class="pre">traffic</span> <span class="pre">from</span> </code> -&gt; <code class="docutils literal notranslate"><span class="pre">My</span> <span class="pre">IP</span></code>.</p></li>
<li><p>Use <strong>existing security group</strong>, use default.</p></li>
<li><p>In <strong>Advanced Details</strong>, choose a <code class="docutils literal notranslate"><span class="pre">Spot</span> <span class="pre">instance</span></code>. Spot instances are discounted instances from unused EC2 capacities. Most seismology can be ran on Spot.</p></li>
<li><p>The rest is default and <strong>launch it</strong>. Now the instance is launched, use the console to check.</p></li>
<li><p><strong>View instance</strong>, click on it -&gt; Right click -&gt;  connect -&gt; SSH client. We will only go through step 3 and copying the ssh command line.</p></li>
<li><p>Change the permission to your local PEM/PPK file to only readibly to you. Use terminal and change the permission by going into the folder where the PEM/PPK file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>chmod <span class="m">400</span> file.pem
</pre></div>
</div>
</li>
<li><p>Login to the Instance</p>
<p>a. On <strong>Linux</strong>, copy the ssh link command in the folder where the PEM file is below and ssh to the instance.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh -i <span class="s2">&quot;file.pem&quot;</span> ec2-user@ec2.IPADDRESS
</pre></div>
</div>
<p>b. On <strong>Windows</strong>, login to an EC2 instance using <strong>PuTTY</strong> (a free SSH client) on Windows:
* Open PuTTY
* On the PuTTY Configuration screen, click Session in the Category pane.
* In the Host Name (or IP address) box, paste <code class="docutils literal notranslate"><span class="pre">ec2-user&#64;YOUR_Public</span> <span class="pre">IPv4</span> <span class="pre">DNS</span></code> YOUR_Public IPv4 DNS can be found in the details of your EC2 instance
* Make sure Connection type: SSH is clicked
* Back in the Category pane, expand Connection, expand SSH, and click Auth.
* In the Private key file for authentication box, click browse and locate your .ppk file for the instance that you created and click.
* Now click open and accept the connection.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="installing-software">
<h1>Installing Software<a class="headerlink" href="#installing-software" title="Permalink to this headline">¶</a></h1>
<p>To start from scratch, copy paste these commands in the terminal.
You can copy the lines all at once and install it.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo yum install -y git docker
wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
chmod +x Miniconda3-latest-Linux-x86_64.sh 
./Miniconda3-latest-Linux-x86_64.sh -b -p <span class="nv">$HOME</span>/miniconda
./miniconda/bin/conda init bash
bash
</pre></div>
</div>
<p>You can customize to save time. If <code class="docutils literal notranslate"><span class="pre">pip</span></code> or <code class="docutils literal notranslate"><span class="pre">docker</span></code> is not necessary, remove these lines.</p>
<p>Now you can install your software! Clone your repository, install your environment, run your scripts. We will illustrate with the example</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/SeisSCOPED/seis_cloud
<span class="nb">cd</span> seis_cloud
conda create -y -n seiscloud <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.12 pip
conda activate seiscloud
pip install -r requirements.txt
</pre></div>
</div>
<p>(update from github and overwrite local: git fetch + git merge)</p>
<div class="section" id="download-upload-to-your-ec2-instance">
<h2>Download / Upload to your EC2 instance<a class="headerlink" href="#download-upload-to-your-ec2-instance" title="Permalink to this headline">¶</a></h2>
<p>To download from EC2:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>scp -i <span class="s2">&quot;your.pem&quot;</span> ec2-user@ec2-publicIPAddress.us-west-2.compute.amazonaws.com:/home/ec2-user/seis_cloud/file .
</pre></div>
</div>
<p>If you are on Windows:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>C:<span class="se">\&gt;</span> pscp -i yourkey.ppk ec2-user@publicDNS:/home/ubuntu/yourfilename C:<span class="se">\[</span>local_destination_path<span class="o">]</span><span class="se">\[</span>folder<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="running-jupyter-notebooks">
<h2>Running Jupyter Notebooks<a class="headerlink" href="#running-jupyter-notebooks" title="Permalink to this headline">¶</a></h2>
<p>To get the jupyter notebook running:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jupyter notebook --ip <span class="m">0</span>.0.0.0
</pre></div>
</div>
<p>Open a browser, type the IP address of the instance (see the public Public IPv4 DNS)
Then type in the browser:
publicIPaddress:8888</p>
<p>You will be prompted to window and enter a token. On the EC2 terminal instance, you will see:
<code class="docutils literal notranslate"><span class="pre">http://PRIVATE_IP.us-west-2.compute.internal:8888/?token=LONG_TOKEN</span></code></p>
<p>Copy and past the LONG_TOKEN in the token window and the jupyter notebook will start.</p>
<p>There are alternative options to login:</p>
<ol class="simple">
<li><p>Forward the ports when login in the instance:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ssh -i <span class="s2">&quot;user.pem&quot;</span> user@publicIPaddress -L <span class="m">8888</span>:localhost:8888 -N
</pre></div>
</div>
<ol class="simple">
<li><p>Open a browser and type localhost:8888/</p></li>
</ol>
<p><strong>Warning</strong>: we have experienced exception. Safari and Chrome may treat the connection as malware. These are warnings and can be ignored (???) and find a way to continue.</p>
</div>
<div class="section" id="save-the-virtual-image">
<h2>Save the Virtual Image<a class="headerlink" href="#save-the-virtual-image" title="Permalink to this headline">¶</a></h2>
<p>You can save the image (AMI) so that you can start from there next time. This can save time and effort in setting up the instance from scratch every time.
Here are the steps to save the virtual image (AMI) of an EC2 instance in AWS:</p>
<p>In your AWS Management Console:</p>
<ol class="simple">
<li><p>Navigate to the EC2 dashboard.</p></li>
<li><p>Select the EC2 instance that you want to save the image of.</p></li>
<li><p>Right-click on the instance and click on “Create Image” in the dropdown menu.</p></li>
<li><p>In the “Create Image” dialog box, enter a descriptive name for your image in the “Name” field. For this workshop, please use the format <strong>”FirstName_LastName_Image_TutorialX”</strong>.</p></li>
<li><p>Optionally, you can add a description and tags to the image for easier management later on.</p></li>
<li><p>Click on the “Create Image” button to start the image creation process.</p></li>
<li><p>Wait for the image creation process to complete. This may take several minutes depending on the size of your instance and the amount of data being saved.</p></li>
<li><p>Once the image has been created, it will appear in the “AMIs” section of the EC2 dashboard.</p></li>
</ol>
<p>You have to save it every time you want to save the current state of the instance</p>
</div>
<div class="section" id="using-docker-on-ec2">
<h2>Using Docker on EC2<a class="headerlink" href="#using-docker-on-ec2" title="Permalink to this headline">¶</a></h2>
<p>You can also run the scripts using the automatically generated Docker image. Note that if you have a Jupyter notebook running on port 8888 before starting Docker, you will need to terminate it before running Docker to avoid port conflicts.</p>
<ol class="simple">
<li><p>Start docker</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl start docker
</pre></div>
</div>
<ol class="simple">
<li><p>Pull the image. This will pull the Docker image named seis_cloud from the GitHub Container Registry, with the specific tag f041ec0.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo docker pull ghcr.io/seisscoped/seis_cloud:f041ec0
</pre></div>
</div>
<ol class="simple">
<li><p>Run the docker. This will run the seis_cloud image in interactive mode, and forward port 8888 from the container to port 8888 on the EC2 instance. The latest tag will pull the most recent version of the image.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo docker run -it -p <span class="m">8888</span>:8888 ghcr.io/seisscoped/seis_cloud:latest
</pre></div>
</div>
<ol class="simple">
<li><p>You will be inside the docker container. You can now run a jupyter notebook from there.</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>jupyter notebook --ip <span class="m">0</span>.0.0.0
</pre></div>
</div>
<ol class="simple">
<li><p>To exit docker, simply type</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">exit</span>
</pre></div>
</div>
</div>
<div class="section" id="terminating-an-instance">
<h2>Terminating an instance<a class="headerlink" href="#terminating-an-instance" title="Permalink to this headline">¶</a></h2>
<p>What is the difference between stop and terminate and instance, saving data vs cost
<strong>NOTE</strong>: visit <a class="reference external" href="https://docs.rightscale.com/faq/clouds/aws/Whats_the_difference_between_Terminating_and_Stopping_an_EC2_Instance.html">here</a> to read more about stopping vs terminating.
If you stop, you do not pay for the hardware, but you will pay for the EBS volume only and the data is saved in the EBS volume. If you terminate, all data will be wiped and you will cease to pay.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./softhardware"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="index.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Intro</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="AWS_S3.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">AWS S3</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Marine Denolle, eScience Institute, University of Washington<br/>
    
        &copy; Copyright 2021.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>